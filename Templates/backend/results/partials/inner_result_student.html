{% load static %} {% load my_tags %}

<!-- School Header -->
<div class="row align-items-center justify-content-between">
  <img
    src="{{ school.school_logo.url }}"
    width="50"
    height="50"
    alt="School Logo"
    class="school-logo"
  />
  <div class="text-center mb-4">
    <h3 class="mt-1">{{ school.school_name|upper }}</h3>
    <p class="school-address mb-1">{{ school.school_address|upper }}</p>
  </div>
  <img
    src="{{ school.school_logo.url }}"
    width="80"
    height="100"
    alt="School Logo"
    class="school-logo"
  />
</div>

<!-- Student Info -->
<div class="row mb-4">
  <div class="col-md-6">
    <p><strong>Name:</strong> {{object.student.student_name|title}}</p>
    <p>
      <strong>Class:</strong>
      {{object.current_enrollment.student_class.class_name|upper }}
    </p>
    <p><strong>Student ID:</strong> {{object.student.user.username|upper}}</p>
  </div>
  <div class="col-md-6 text-right">
    <p><strong>Sex:</strong> {{object.student.gender|upper}}</p>
    <p>
      <strong>Term:</strong> {{object.current_enrollment.academic_term|upper }}
    </p>
    <p>
      <strong>Session:</strong>
      {{object.current_enrollment.academic_session|upper }}
    </p>
  </div>
</div>

<!-- Results Table -->
<div class="table-responsive">
  <table class="table table-bordered">
    <thead class="thead-light">
      <tr>
        <th>Subject</th>
        <th>1st CA</th>
        <th>2nd CA</th>
        <th>3rd CA</th>
        <th>Exam</th>
        <th>Total</th>
        <th>Grade</th>
        <th>Remark</th>
      </tr>
    </thead>
    <tbody>
      {% for score in scores %}
      <tr>
        <td>{{score.subject.school_subject.subject_name|upper}}</td>
        <td>{{score.first_ca|default:"N/A"}}</td>
        <td>{{score.second_ca|default:"N/A"}}</td>
        <td>{{score.third_ca|default:"N/A"}}</td>
        <td>{{score.exam|default:"N/A"}}</td>
        <td>{{score.total_score|default:"N/A"}}</td>
        <td>{{score.grade.grade_letter|upper|default:"N/A"}}</td>
        <td>{{score.grade.grade_description|upper|default:"N/A"}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Summary -->
<div class="row mt-4">
  <div class="col-md-6">
    <p><strong>Total Marks:</strong> {{object.total_marks_obtained}}</p>
    <p><strong>Average Score:</strong> {{object.student_average}}%</p>
    <p><strong>Position in Class:</strong> {{object.term_position|upper}}</p>
  </div>
  <div class="col-md-6">
    <p><strong>Class Average:</strong> {{object.class_average}}%</p>
    <p><strong>Total Subjects:</strong> {{object.total_subject}}</p>
  </div>
</div>

<!-- Remarks -->
<div class="remarks mt-4">
  <p>
    <strong>Class Teacher's Remarks:</strong> WOW, WHAT A BRILLIANT PERFORMANCE.
    YOU ARE AMAZING!
  </p>
  <p><strong>Principal's Remarks:</strong> AN EXCELLENT RESULT, KEEP IT UP</p>
</div>
